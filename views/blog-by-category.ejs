<%- include('./header.ejs') %>
<br>
<br>
<!-- ================= CATEGORY HEADER ================= -->
<section class="py-5 bg-light border-bottom">
  <div class="container text-center">

    <h2 class="fw-bold mb-2">
      Blogs by Category
    </h2>

    <% if (blogs.length > 0 && blogs[0].category) { %>
      <span class="badge bg-primary fs-6">
        <%= blogs[0].category.categoryname %>
      </span>
    <% } %>

    <p class="text-muted mt-3">
      Explore articles related to this category
    </p>

  </div>
</section>

<!-- ================= BLOG LIST ================= -->
<section class="py-5">
  <div class="container">

    <% if (blogs.length === 0) { %>
      <!-- EMPTY STATE -->
      <div class="text-center py-5">
        <h4 class="fw-bold">No Blogs Found</h4>
        <p class="text-muted mb-4">
          There are no blogs available under this category yet.
        </p>
        <a href="/blog" class="btn btn-outline-primary">
          View All Blogs
        </a>
      </div>
    <% } %>

    <div class="row">
      <% blogs.forEach(item => { %>
        <div class="col-md-4 mb-4">
          <div class="card h-100 border-0 shadow-sm blog-card">

            <!-- BLOG IMAGE -->
            <a href="/blogdetail/<%= item._id %>">
              <img
                src="<%= item.image.url %>"
                class="card-img-top"
                style="height:200px;object-fit:cover"
                alt="<%= item.title %>"
              >
            </a>

            <!-- BLOG CONTENT -->
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">
                <a
                  href="/blogdetail/<%= item._id %>"
                  class="text-decoration-none text-dark"
                >
                  <%= item.title %>
                </a>
              </h5>

              <p class="card-text text-muted">
                <%= item.description.slice(0,100) %>...
              </p>

              <div class="mt-auto">
                <a
                  href="/blogdetail/<%= item._id %>"
                  class="btn btn-sm btn-primary"
                >
                  Read More
                </a>
              </div>
            </div>

          </div>
        </div>
      <% }) %>
    </div>

  </div>
</section>

<!-- ================= CARD HOVER EFFECT ================= -->
<style>
  .blog-card {
    transition: all 0.3s ease;
  }

  .blog-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 12px 25px rgba(0,0,0,0.12);
  }
</style>

<%- include('./footer.ejs') %>
